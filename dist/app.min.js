(()=>{var M=Object.create;var z=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var B=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var F=(t,e,o,l)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of C(e))!U.call(t,i)&&i!==o&&z(t,i,{get:()=>e[i],enumerable:!(l=O(e,i))||l.enumerable});return t};var H=(t,e,o)=>(o=t!=null?M($(t)):{},F(e||!t||!t.__esModule?z(o,"default",{value:t,enumerable:!0}):o,t));var T=(t,e,o)=>new Promise((l,i)=>{var m=n=>{try{a(o.next(n))}catch(d){i(d)}},f=n=>{try{a(o.throw(n))}catch(d){i(d)}},a=n=>n.done?l(n.value):Promise.resolve(n.value).then(m,f);a((o=o.apply(t,e)).next())});var D=B((L,A)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof L!="undefined"?e():(e(),t.FileSaver={})})(L,function(){"use strict";function t(a,n){return typeof n=="undefined"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function e(a,n,d){var r=new XMLHttpRequest;r.open("GET",a),r.responseType="blob",r.onload=function(){f(r.response,n,d)},r.onerror=function(){console.error("could not download file")},r.send()}function o(a){var n=new XMLHttpRequest;n.open("HEAD",a,!1);try{n.send()}catch(d){}return 200<=n.status&&299>=n.status}function l(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(d){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(n)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,m=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(a,n,d){var r=i.URL||i.webkitURL,c=document.createElement("a");n=n||a.name||"download",c.download=n,c.rel="noopener",typeof a=="string"?(c.href=a,c.origin===location.origin?l(c):o(c.href)?e(a,n,d):l(c,c.target="_blank")):(c.href=r.createObjectURL(a),setTimeout(function(){r.revokeObjectURL(c.href)},4e4),setTimeout(function(){l(c)},0))}:"msSaveOrOpenBlob"in navigator?function(a,n,d){if(n=n||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(t(a,d),n);else if(o(a))e(a,n,d);else{var r=document.createElement("a");r.href=a,r.target="_blank",setTimeout(function(){l(r)})}}:function(a,n,d,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),typeof a=="string")return e(a,n,d);var c=a.type==="application/octet-stream",N=/constructor/i.test(i.HTMLElement)||i.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||c&&N||m)&&typeof FileReader!="undefined"){var w=new FileReader;w.onloadend=function(){var b=w.result;b=k?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=b:location=b,r=null},w.readAsDataURL(a)}else{var S=i.URL||i.webkitURL,s=S.createObjectURL(a);r?r.location=s:location.href=s,r=null,setTimeout(function(){S.revokeObjectURL(s)},4e4)}});i.saveAs=f.saveAs=f,typeof A!="undefined"&&(A.exports=f)})});function E(t,e){document.addEventListener(t,e,!1)}function x(t,...e){let o="";return t.forEach((l,i)=>{o+=l+(e[i]||"")}),o}function g(t,e){e.insertAdjacentHTML("afterbegin",t)}var V={template(t){return x`<div class="container-toast">
      <div class="toast">${t}</div>
    </div>`},show(t){let e=document.querySelector("#app");g(this.template(t),e),setTimeout(()=>{document.querySelector(".container-toast").remove()},1500)}},h=V;var X={root:document.querySelector("#app"),manageNotes(){g(x`<section id="templatenotes">
        <ul id="notepad"></ul>
        <div class="container-settings">
          <button id="opensettings" class="icon button"></button>
        </div>
        <button id="newnote" class="icon"></button>
      </section>`,this.root)},newNote(){g(x`<section id="templatenew" class="container-app">
        <div class="container-buttons">
          <button
            id="addnote"
            class="icon right-50 button-note button"
          ></button>
          <button
            id="closetemplate"
            class="icon right-10 button-note button"
            data-close="templatenew"
          ></button>
        </div>
        <textarea
          id="areanew"
          class="area-note"
          placeholder="Write note..."
        ></textarea>
      </section>`,this.root)},viewNote(t,e){g(x`<section id="templateview" class="container-app">
        <div class="container-buttons">
          <button
            id="backtemplate"
            class="icon left-10 button-note button"
            data-close="templateview"
          ></button>
          <button
            id="locknote"
            class="icon right-180 button-note button"
          ></button>
          <button
            id="savenote"
            class="icon right-140 button-note button"
            data-save="${t}"
          ></button>
          <button
            id="downloadnote"
            class="icon right-95 button-note button"
            data-download="${t}"
          ></button>
          <button
            id="copynote"
            class="icon right-50 button-note button-copy"
            data-copy="${t}"
          ></button>
          <button
            id="removenote"
            class="icon right-10 button-note button"
            data-remove="${t}"
          ></button>
        </div>
        <textarea
          id="areaview"
          class="area-note"
          placeholder="Write note..."
          readonly="true"
        >
${e}</textarea
        >
      </section>`,this.root)},backupNotes(){g(x`<section id="templatebackup">
        <div class="container-buttons">
          <button
            id="closetemplate"
            class="icon right-10 button-note button"
            data-close="templatebackup"
          ></button>
        </div>
        <div class="container-backup">
          <div class="container-title">
            <strong>Export Notes</strong>
            <div class="container-title-buttons">
              <button id="exportnotes" class="icon button"></button>
            </div>
          </div>
          <div class="container-title">
            <strong>Import Notes</strong>
            <div class="container-title-buttons">
              <div id="importnotes" class="button">
                <input id="importdata" class="button" type="file" />
              </div>
            </div>
          </div>
        </div>
      </section>`,this.root)}},y=X;var Y={db:[],data(){return localStorage.getItem("db")},addItem(t,e){let o=new Object;o.id=t,o.value=e,this.db.push(o),this.saveData()},saveItem(t,e){let o=this.db,l=o.findIndex(i=>i.id===parseInt(t));o[l].value=e,this.saveData()},removeItem(t){let e=this.db.filter(o=>o.id!==parseInt(t));this.db=[],e.forEach(o=>this.db.push(o)),this.saveData()},saveData(){let t=JSON.stringify(this.db);localStorage.setItem("db",t)},importData(t){localStorage.setItem("db",t)},init(){let t=this.data();this.db=JSON.parse(t)}},u=Y;var W={textLength(t){try{return t.substring(0,19).length===19?t.substring(0,19)+"...":t.substring(0,19)}catch(e){if(e)return}},note(t,e){return x`<li class="note-card" data-note="${t}">
      ${this.textLength(e)}
    </li>`},addNote(t){let e=Date.now();u.addItem(e,t);let o=document.querySelector("#notepad");g(this.note(e,t),o)},saveNote(t,e){u.saveItem(t,e);let o=document.querySelector(`[data-note="${t}"]`);o.textContent=this.textLength(e)},removeNote(t){u.removeItem(t),document.querySelector(`[data-note="${t}"]`).remove()},exportNotes(){return u.data()},importNotes(t){u.importData(t),document.querySelector("[data-note]")&&document.querySelectorAll("[data-note]").forEach(l=>l.remove()),this.load()},noteValue(t){return u.db.find(l=>l.id===parseInt(t)).value},load(){if(localStorage.length===0)this.reset();else if(u.data().length>2){u.init();let t=u.db,e=document.querySelector("#notepad");t.forEach(o=>g(this.note(o.id,o.value),e))}},reset(){u.saveData()}},p=W;function v(t){document.querySelector(t).remove(),document.querySelector("#templatenotes").classList.remove("is-hidden")}var j=H(D(),1);function q(t){return T(this,null,function*(){yield navigator.clipboard.writeText(t)})}var _={onClick(t){let e=t.target.matches("#newnote"),o=t.target.matches("#addnote"),l=t.target.dataset.note,i=t.target.matches("#locknote"),m=t.target.dataset.save,f=t.target.dataset.download,a=t.target.dataset.copy,n=t.target.dataset.remove,d=t.target.dataset.close,r=t.target.matches("#opensettings"),c=t.target.matches("#exportnotes"),N=document.querySelector("#templateview"),k=document.querySelector("#templatebackup"),w=document.querySelector("#templatenotes"),S=document.querySelector("#templatenew");if(e&&!N&&!k&&(w.classList.add("is-hidden"),y.newNote(),document.querySelector("#areanew").focus()),o){let s=document.querySelector("#areanew");s.value.length>0?(p.addNote(s.value),v("#templatenew"),h.show("Note added")):v("#templatenew")}if(l&&!S&&!k){w.classList.add("is-hidden");let s=p.noteValue(l);y.viewNote(l,s)}if(i){let s=document.querySelector("#areaview");if(s.hasAttribute("readonly")){s.removeAttribute("readonly");let R=s.value.length;s.focus(),s.setSelectionRange(R,R),s.scrollTop=s.scrollHeight}else s.setAttribute("readonly",!0);document.querySelector("#locknote").classList.toggle("is-unlock")}if(m){let s=document.querySelector("#areaview");s.value.length>0?(p.saveNote(m,s.value),v("#templateview"),h.show("Note saved")):(p.removeNote(m),v("#templateview"),h.show("Note deleted"))}if(f){let s=p.noteValue(f),b=new Blob([s],{type:"text/plain;charset=utf-8"});(0,j.saveAs)(b,`${f}.txt`)}if(a){let s=p.noteValue(a);q(s),h.show("Copied to clipboard")}if(n&&(p.removeNote(n),v("#templateview"),h.show("Note deleted")),d&&v(`#${d}`),r&&(w.classList.add("is-hidden"),y.backupNotes()),c){let s=p.exportNotes(),b=new Blob([s],{type:"application/json;charset=utf-8"});(0,j.saveAs)(b,"notes.json")}},onChange(t){if(t.target.matches("#importdata")){let l=document.querySelector("#importdata").files[0],i=new FileReader;i.readAsText(l),i.onload=()=>{if(l.type==="application/json")if(i.result.includes("{"))try{p.importNotes(i.result),v("#templatebackup"),h.show("Notes updated")}catch(m){m&&(h.show("Error with database"),p.reset())}else h.show("Error with database");else h.show("File not compatible")}}}},I=_;function J(){E("click",I.onClick),E("change",I.onChange),y.manageNotes(),p.load()}E("DOMContentLoaded",J);})();
