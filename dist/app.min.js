(()=>{var O=Object.create;var R=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var B=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var F=(t,e,o,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of $(e))!U.call(t,r)&&r!==o&&R(t,r,{get:()=>e[r],enumerable:!(s=C(e,r))||s.enumerable});return t};var H=(t,e,o)=>(o=t!=null?O(M(t)):{},F(e||!t||!t.__esModule?R(o,"default",{value:t,enumerable:!0}):o,t));var T=(t,e,o)=>new Promise((s,r)=>{var h=n=>{try{a(o.next(n))}catch(d){r(d)}},f=n=>{try{a(o.throw(n))}catch(d){r(d)}},a=n=>n.done?s(n.value):Promise.resolve(n.value).then(h,f);a((o=o.apply(t,e)).next())});var D=B((k,A)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof k!="undefined"?e():(e(),t.FileSaver={})})(k,function(){"use strict";function t(a,n){return typeof n=="undefined"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function e(a,n,d){var i=new XMLHttpRequest;i.open("GET",a),i.responseType="blob",i.onload=function(){f(i.response,n,d)},i.onerror=function(){console.error("could not download file")},i.send()}function o(a){var n=new XMLHttpRequest;n.open("HEAD",a,!1);try{n.send()}catch(d){}return 200<=n.status&&299>=n.status}function s(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(d){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(n)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,h=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(a,n,d){var i=r.URL||r.webkitURL,c=document.createElement("a");n=n||a.name||"download",c.download=n,c.rel="noopener",typeof a=="string"?(c.href=a,c.origin===location.origin?s(c):o(c.href)?e(a,n,d):s(c,c.target="_blank")):(c.href=i.createObjectURL(a),setTimeout(function(){i.revokeObjectURL(c.href)},4e4),setTimeout(function(){s(c)},0))}:"msSaveOrOpenBlob"in navigator?function(a,n,d){if(n=n||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(t(a,d),n);else if(o(a))e(a,n,d);else{var i=document.createElement("a");i.href=a,i.target="_blank",setTimeout(function(){s(i)})}}:function(a,n,d,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),typeof a=="string")return e(a,n,d);var c=a.type==="application/octet-stream",L=/constructor/i.test(r.HTMLElement)||r.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||c&&L||h)&&typeof FileReader!="undefined"){var S=new FileReader;S.onloadend=function(){var g=S.result;g=E?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=g:location=g,i=null},S.readAsDataURL(a)}else{var l=r.URL||r.webkitURL,w=l.createObjectURL(a);i?i.location=w:location.href=w,i=null,setTimeout(function(){l.revokeObjectURL(w)},4e4)}});r.saveAs=f.saveAs=f,typeof A!="undefined"&&(A.exports=f)})});function N(t,e){document.addEventListener(t,e,!1)}function v(t,...e){let o="";return t.forEach((s,r)=>{o+=s+(e[r]||"")}),o}function p(t,e){e.insertAdjacentHTML("afterbegin",t)}var V={template(t){return v`<div class="container-toast">
      <div class="toast">${t}</div>
    </div>`},show(t){let e=document.querySelector("#app");p(this.template(t),e),setTimeout(()=>{document.querySelector(".container-toast").remove()},1500)}},y=V;var W={root:document.querySelector("#app"),manageNotes(){p(v`<section id="templatenotes">
        <ul id="notepad"></ul>
        <div class="container-settings">
          <button id="opensettings" class="icon button"></button>
        </div>
        <button id="newnote" class="icon"></button>
      </section>`,this.root)},newNote(){p(v`<section id="templatenew" class="container-app">
        <div class="container-buttons">
          <button
            id="addnote"
            class="icon right-50 button-note button"
          ></button>
          <button
            id="closetemplate"
            class="icon right-10 button-note button"
            data-close="templatenew"
          ></button>
        </div>
        <textarea
          id="areanew"
          class="area-note"
          placeholder="Write note..."
        ></textarea>
      </section>`,this.root)},viewNote(t,e){p(v`<section id="templateview" class="container-app">
        <div class="container-buttons">
          <button
            id="backtemplate"
            class="icon left-10 button-note button"
            data-close="templateview"
          ></button>
          <button
            id="locknote"
            class="icon right-180 button-note button"
          ></button>
          <button
            id="savenote"
            class="icon right-140 button-note button"
            data-save="${t}"
          ></button>
          <button
            id="downloadnote"
            class="icon right-95 button-note button"
            data-download="${t}"
          ></button>
          <button
            id="copynote"
            class="icon right-50 button-note button-copy"
            data-copy="${t}"
          ></button>
          <button
            id="removenote"
            class="icon right-10 button-note button"
            data-remove="${t}"
          ></button>
        </div>
        <textarea
          id="areaview"
          class="area-note"
          placeholder="Write note..."
          readonly="true"
        >
${e}</textarea
        >
      </section>`,this.root)},backupNotes(){p(v`<section id="templatebackup">
        <div class="container-buttons">
          <button
            id="closetemplate"
            class="icon right-10 button-note button"
            data-close="templatebackup"
          ></button>
        </div>
        <div class="container-backup">
          <div class="container-title">
            <strong>Export Notes</strong>
            <div class="container-title-buttons">
              <button id="exportnotes" class="icon button"></button>
            </div>
          </div>
          <div class="container-title">
            <strong>Import Notes</strong>
            <div class="container-title-buttons">
              <div id="importnotes" class="button">
                <input id="importdata" class="button" type="file" />
              </div>
            </div>
          </div>
        </div>
      </section>`,this.root)}},x=W;var _={db:[],data(){return localStorage.getItem("db")},addItem(t,e){let o=new Object;o.id=t,o.value=e,this.db.push(o),this.saveData()},saveItem(t,e){let o=this.db,s=o.findIndex(r=>r.id===parseInt(t));o[s].value=e,this.saveData()},removeItem(t){let e=this.db.filter(o=>o.id!==parseInt(t));this.db=[],e.forEach(o=>this.db.push(o)),this.saveData()},saveData(){let t=JSON.stringify(this.db);localStorage.setItem("db",t)},importData(t){localStorage.setItem("db",t)},init(){let t=this.data();this.db=JSON.parse(t)}},m=_;var J={textLength(t){return t.substring(0,19).length===19?t.substring(0,19)+"...":t.substring(0,19)},note(t,e){return v`<li class="note-card" data-note="${t}">
      ${this.textLength(e)}
    </li>`},addNote(t){let e=Date.now();m.addItem(e,t);let o=document.querySelector("#notepad");p(this.note(e,t),o)},saveNote(t,e){m.saveItem(t,e);let o=document.querySelector(`[data-note="${t}"]`);o.textContent=this.textLength(e)},removeNote(t){m.removeItem(t),document.querySelector(`[data-note="${t}"]`).remove()},exportNotes(){return m.data()},importNotes(t){m.importData(t),document.querySelector("[data-note]")&&document.querySelectorAll("[data-note]").forEach(s=>s.remove()),this.load()},noteValue(t){return m.db.find(s=>s.id===parseInt(t)).value},load(){if(localStorage.length===0)m.saveData();else if(m.data().length>2){m.init();let t=m.db,e=document.querySelector("#notepad");t.forEach(o=>p(this.note(o.id,o.value),e))}}},u=J;function b(t){document.querySelector(t).remove(),document.querySelector("#templatenotes").classList.remove("is-hidden")}var I=H(D(),1);function q(t){return T(this,null,function*(){yield navigator.clipboard.writeText(t)})}var X={onClick(){let t=event.target.matches("#newnote"),e=event.target.matches("#addnote"),o=event.target.dataset.note,s=event.target.matches("#locknote"),r=event.target.dataset.save,h=event.target.dataset.download,f=event.target.dataset.copy,a=event.target.dataset.remove,n=event.target.dataset.close,d=event.target.matches("#opensettings"),i=event.target.matches("#exportnotes"),c=document.querySelector("#templateview"),L=document.querySelector("#templatebackup"),E=document.querySelector("#templatenotes"),S=document.querySelector("#templatenew");if(t&&!c&&!L&&(E.classList.add("is-hidden"),x.newNote(),document.querySelector("#areanew").focus()),e){let l=document.querySelector("#areanew");l.value.length>0?(u.addNote(l.value),b("#templatenew"),y.show("Note added")):b("#templatenew")}if(o&&!S&&!L){E.classList.add("is-hidden");let l=u.noteValue(o);x.viewNote(o,l)}if(s){let l=document.querySelector("#areaview");if(l.hasAttribute("readonly")){l.removeAttribute("readonly");let g=l.value.length;l.focus(),l.setSelectionRange(g,g),l.scrollTop=l.scrollHeight}else l.setAttribute("readonly",!0);document.querySelector("#locknote").classList.toggle("is-unlock")}if(r){let l=document.querySelector("#areaview");l.value.length>0?(u.saveNote(r,l.value),b("#templateview"),y.show("Note saved")):(u.removeNote(r),b("#templateview"),y.show("Note deleted"))}if(h){let l=u.noteValue(h),w=new Blob([l],{type:"text/plain;charset=utf-8"});(0,I.saveAs)(w,`${h}.txt`)}if(f){let l=u.noteValue(f);q(l),y.show("Copied to clipboard")}if(a&&(u.removeNote(a),b("#templateview"),y.show("Note deleted")),n&&b(`#${n}`),d&&(E.classList.add("is-hidden"),x.backupNotes()),i){let l=u.exportNotes(),w=new Blob([l],{type:"application/json;charset=utf-8"});(0,I.saveAs)(w,"notes.json")}},onChange(){if(event.target.matches("#importdata")){let o=document.querySelector("#importdata").files[0],s=new FileReader;s.readAsText(o),s.onload=()=>{u.importNotes(s.result),b("#templatebackup"),y.show("Notes updated")}}}},j=X;function G(){N("click",j.onClick),N("change",j.onChange),x.manageNotes(),u.load()}N("DOMContentLoaded",G);})();
